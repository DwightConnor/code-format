# Editor Format - 智能代码编辑器

一个功能强大的uTools插件，提供多语言代码格式化、语法高亮和编辑功能。

## 🚀 功能特性

### 核心功能
- **🖱️ 鼠标中键快速启动**: 点击鼠标中键即可快速唤起uTools并自动显示编辑器，同时自动加载剪贴板内容
- **多语言支持**: 自动识别并高亮显示JSON、JavaScript、Java、SQL、HTML、Shell等多种编程语言
- **智能格式化**: 一键格式化代码，支持自定义缩进和样式
- **实时语法高亮**: 基于Monaco Editor提供专业级代码编辑体验
- **搜索替换**: 支持正则表达式的强大搜索和替换功能
- **行数跳转**: 快速跳转到指定行号
- **主题切换**: 支持明暗主题切换
- **📋 全局文本选择**: 在任意地方选中文本后，通过uTools快捷键直接启动插件并导入选中内容
- **📋 智能剪贴板集成**: 自动读取剪贴板内容，支持一键粘贴和复制功能，自动聚焦并定位光标

### JSON专属功能
- **键排序**: A-Z或Z-A键名排序
- **代码压缩**: 移除空格和换行，生成紧凑格式
- **转义处理**: 
  - 加转义：将JSON转换为字符串格式
  - 去转义：解析转义的JSON字符串

### 其他功能
- **🚀 多实例支持**: 支持同时打开多个编辑器窗口，每个实例内容完全独立互不影响
- **全屏模式**: 提供专注的编辑环境
- **复制功能**: 一键复制所有内容到系统剪贴板
- **粘贴功能**: 一键粘贴剪贴板内容到编辑器
- **实时统计**: 显示行数、字符数和光标位置
- **智能启动**: 支持选中文本启动和空白编辑器两种模式

## 📦 安装条件

### 系统要求
- **操作系统**: Windows 10/11, macOS 10.14+, Linux (Ubuntu 18.04+)
- **uTools版本**: 2.0.0 及以上
- **内存**: 至少 512MB 可用内存
- **网络**: 需要互联网连接（用于加载Monaco Editor和相关库）

### 软件依赖
1. **uTools**: 
   - 下载地址: [https://www.u-tools.cn](https://www.u-tools.cn)
   - 安装并激活uTools

2. **uTools开发者工具** (仅开发时需要):
   - 在uTools插件市场搜索"uTools开发者工具"
   - 安装并获取开发者工具

### 外部依赖 (自动加载)
- Monaco Editor (v0.48.0) - 代码编辑器核心
- Tailwind CSS - UI样式框架
- js-beautify (v1.15.1) - JavaScript/Java代码格式化
- node-sql-parser - SQL语句解析和格式化

## 🛠️ 安装方法

### 方法一：通过uTools开发者工具 (推荐)
1. 打开uTools开发者工具
2. 点击"新建项目"或"导入项目"
3. 选择本项目的plugin.json文件
4. 点击"接入开发"
5. 在uTools中输入关键词启动插件

### 方法二：手动安装
1. 确保project文件夹包含以下文件：
   ```
   editor-format/
   ├── plugin.json     # 插件配置文件
   ├── index.html      # 主界面文件
   ├── logo.png        # 插件图标
   └── README.md       # 说明文档
   ```
2. 打开uTools开发者工具
3. 导入整个文件夹

## 🎯 使用方法

### 启动插件

#### 方式一：鼠标中键快速启动（⭐ 新功能）
1. **选中文本优先**: 先选中任意文本，然后点击鼠标中键唤起uTools
   - 插件会自动显示为"快速编辑选中文本"
   - 会显示通知："快速编辑器已启动，已加载选中文本内容，共X字符"
   
2. **剪贴板内容备用**: 如果没有选中文本，直接点击鼠标中键
   - 插件会自动显示为"快速编辑器"
   - 自动加载剪贴板内容到编辑框中
   - 会显示通知："快速编辑器已启动，已加载剪贴板内容，共X字符"
   
3. **智能工作流程**: 
   ```
   选中文本 → 中键 → 直接编辑选中内容
   或
   中键 → 自动加载剪贴板 → 开始编辑
   ```
   - 编辑器自动聚焦，光标定位到内容末尾，可立即开始编辑

#### 方式二：全局文本选择（推荐）
1. **选中任意文本**: 在任何应用程序中选中需要格式化的代码文本
2. **调出uTools**: 使用uTools的全局快捷键（默认Alt+Space或自定义快捷键）
3. **直接启动**: 插件会自动识别选中的文本并直接启动格式化功能
   - 会显示通知："已获取选中文本，共X字符"
   - 编辑器会自动加载选中的内容并进行语言识别

#### 方式三：关键词启动
在uTools中输入以下任一关键词：
- `代码格式化`
- `editor-format`
- `代码编辑器`
- `json格式化`
- `sql格式化`
- `java格式化`
- `javascript格式化`
- `html格式化`
- `代码美化`
- `格式化工具`

#### 方式四：剪贴板模式
1. 复制需要格式化的代码到剪贴板
2. 使用关键词启动插件
3. 插件会自动检测并加载剪贴板内容
   - 会显示通知："已加载剪贴板内容，共X字符"
   - 编辑器会自动填入剪贴板内容

### 基本操作
1. **加载内容**: 
   - 选中文本启动：自动加载选中的文本
   - 关键词启动：自动加载剪贴板内容
   - 手动输入：直接在编辑器中输入代码
2. **多实例使用**:
   - 可以同时启动多个编辑器实例
   - 每个实例在窗口标题显示唯一编号（如：智能代码编辑器 #1234）
   - 每个实例的内容完全独立，互不影响
   - 可以同时编辑不同的代码片段
3. **自动识别**: 插件会自动识别代码语言类型并应用语法高亮
4. **格式化**: 点击顶部菜单栏的"格式化"按钮进行代码美化
5. **主题切换**: 点击"主题"按钮切换明暗主题
6. **搜索**: 点击"搜索"按钮或使用Ctrl+F进行查找
7. **剪贴板操作**: 
   - 点击"粘贴剪贴板"按钮导入最新的剪贴板内容
   - 点击"复制"按钮将编辑器内容复制到剪贴板

### JSON特殊操作
当检测到JSON格式时，会显示额外的功能按钮：
- **A-Z**: 按键名A-Z排序
- **Z-A**: 按键名Z-A排序
- **压缩**: 移除格式化，生成单行JSON
- **加转义**: 将JSON转换为字符串格式
- **去转义**: 解析转义的JSON字符串

## 🔧 快捷键
- `Ctrl+F` / `Cmd+F`: 搜索
- `Ctrl+H` / `Cmd+H`: 替换
- `Ctrl+G` / `Cmd+G`: 跳转到行
- `F11`: 全屏切换
- `Ctrl+A` / `Cmd+A`: 全选
- `Ctrl+C` / `Cmd+C`: 复制
- `Ctrl+V` / `Cmd+V`: 粘贴

## 📝 支持的语言格式

| 语言 | 格式化支持 | 语法高亮 | 自动识别 |
|------|-----------|----------|----------|
| JSON | ✅ | ✅ | ✅ |
| JavaScript | ✅ | ✅ | ✅ |
| Java | ✅ | ✅ | ✅ |
| SQL | ✅ | ✅ | ✅ |
| HTML | ✅ | ✅ | ✅ |
| CSS | ✅ | ✅ | ✅ |
| XML | ✅ | ✅ | ✅ |
| Shell | ⚡ | ✅ | ✅ |
| Python | ⚡ | ✅ | ⚡ |
| C/C++ | ⚡ | ✅ | ⚡ |
| TypeScript | ⚡ | ✅ | ⚡ |

> ✅ 完全支持 | ⚡ 基础支持

## 🐛 常见问题

### Q: 插件无法启动？
A: 
1. 检查uTools版本是否为2.0.0及以上
2. 确认plugin.json文件格式正确
3. 检查网络连接，确保可以加载外部资源

### Q: 多开功能如何使用？
A: 
1. **启动多个实例**: 可以通过以下方式同时启动多个编辑器：
   - 方法1：在不同位置选中文本，然后分别使用uTools启动
   - 方法2：多次输入关键词（如"代码格式化"）启动新实例
   - 方法3：使用鼠标中键在不同时间启动多个实例
2. **实例区分**: 每个实例的窗口标题和状态栏都会显示不同的实例编号
3. **独立内容**: 每个实例的编辑内容完全独立，互不影响
4. **实例管理**: 可以通过任务栏或Alt+Tab切换不同的编辑器实例

### Q: 格式化功能不工作？
A: 
1. 确认代码语法正确
2. 检查是否支持该语言的格式化
3. 尝试手动选择语言类型

### Q: 无法加载Monaco Editor？
A: 
1. 检查网络连接
2. 确认防火墙没有阻止CDN资源加载
3. 尝试刷新或重启插件

## 📄 版本信息
- **当前版本**: 1.0.0
- **开发者**: Developer
- **兼容平台**: Windows, macOS, Linux

## 📞 技术支持
如遇到问题或有改进建议，欢迎通过以下方式联系：
- 在uTools插件市场留言
- 提交GitHub Issue (如有)

---

**享受高效的代码编辑体验！** 🎉 